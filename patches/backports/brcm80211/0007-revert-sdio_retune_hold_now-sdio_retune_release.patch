From 94a9892fa4c64965cdb6651998513161223d46cd Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Thu, 18 Jul 2019 19:22:48 -0500
Subject: [PATCH 7/7] revert: sdio_retune_hold_now/sdio_retune_release

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c | 7 -------
 1 file changed, 7 deletions(-)

diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c
index c1237e2ee280..a1139185802c 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c
@@ -680,10 +680,6 @@ brcmf_sdio_kso_control(struct brcmf_sdio *bus, bool on)
 
 	sdio_retune_crc_disable(bus->sdiodev->func1);
 
-	/* Cannot re-tune if device is asleep; defer till we're awake */
-	if (on)
-		sdio_retune_hold_now(bus->sdiodev->func1);
-
 	wr_val = (on << SBSDIO_FUNC1_SLEEPCSR_KSO_SHIFT);
 	/* 1st KSO write goes to AOS wake up core if device is asleep  */
 	brcmf_sdiod_writeb(bus->sdiodev, SBSDIO_FUNC1_SLEEPCSR, wr_val, &err);
@@ -744,9 +740,6 @@ brcmf_sdio_kso_control(struct brcmf_sdio *bus, bool on)
 	if (try_cnt > MAX_KSO_ATTEMPTS)
 		brcmf_err("max tries: rd_val=0x%x err=%d\n", rd_val, err);
 
-	if (on)
-		sdio_retune_release(bus->sdiodev->func1);
-
 	sdio_retune_crc_enable(bus->sdiodev->func1);
 
 	return err;
-- 
2.20.1

